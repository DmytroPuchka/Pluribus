# Pluribus - План разработки проекта

## Описание проекта
Pluribus - международная платформа для связи отправителей и получателей товаров, делающая международную доставку простой и доступной.

## Основные возможности

### Роли пользователей
- **Отправитель (Seller/Deliverer)** - доставляет товары
- **Получатель (Buyer/Receiver)** - заказывает доставку
- Один пользователь может переключаться между ролями

### Функциональные требования

#### 1. Аутентификация и авторизация
- Email + пароль
- Google OAuth 2.0
- Регистрация: email, имя пользователя, страна, город
- Двухфакторная аутентификация (рекомендация)
- Восстановление пароля

#### 2. Личный кабинет

**Общие данные:**
- Имя пользователя
- Аватар (загрузка/редактирование)
- Страна и город
- Личный рейтинг (как покупатель и как продавец отдельно)
- История уведомлений
- Настройки профиля

**Для получателя:**
- Список активных заказов
- Список индивидуальных заявок
- История заказов
- Избранные продавцы
- Сохраненные адреса доставки

**Для отправителя:**
- Список предлагаемых товаров (CRUD операции)
- Список индивидуальных заказов с действиями:
  - Принять
  - Отклонить
  - Взять в работу
  - Уточнить детали (чат с покупателем)
- История заказов
- Переключатель активности (видимость на карте)
- Статистика заказов
- Настройки доставки (способы, сроки, регионы)

#### 3. Главная страница

**Для получателя:**
- Интерактивная карта мира (Google Maps API)
- Кластеризация активных продавцов
- Навигация (zoom, scroll)
- Карточка продавца при клике:
  - Рейтинг (общий и детальный)
  - Информация о продавце
  - Локация (откуда)
  - Способы доставки
  - Ориентировочные сроки
  - Список товаров с фильтрацией
  - Кнопка "Заказать"
  - Кнопка "Индивидуальный заказ"
- Фильтры продавцов:
  - По стране/региону
  - По рейтингу
  - По категории товаров
  - По срокам доставки
- Быстрый переход к активным заказам

**Для отправителя:**
- Дашборд с активными заказами
- Список индивидуальных заказов на рассмотрении
- Статистика (количество заказов, доход, рейтинг)
- Быстрые действия

#### 4. Товары (Products)

**Структура товара:**
```
{
  id: uuid,
  sellerId: uuid,
  title: string,
  description: string,
  photos: array[url], // минимум 1, максимум 10
  price: number,
  currency: string,
  productLink: string (optional),
  category: string,
  weight: number (optional),
  dimensions: object (optional),
  availableQuantity: number,
  customsInfo: object,
  createdAt: timestamp,
  updatedAt: timestamp
}
```

#### 5. Индивидуальные заказы (Custom Orders)

**Структура:**
```
{
  id: uuid,
  buyerId: uuid,
  sellerId: uuid (после принятия),
  title: string,
  description: string,
  photos: array[url],
  maxPrice: number,
  currency: string,
  deliveryDeadline: date | "ASAP",
  deliveryAddress: object,
  status: enum [
    "PENDING_SELLER_RESPONSE",
    "ACCEPTED",
    "DECLINED",
    "CLARIFICATION_NEEDED",
    "IN_PROGRESS",
    "COMPLETED",
    "CANCELLED"
  ],
  messages: array[message], // чат для уточнений
  createdAt: timestamp,
  updatedAt: timestamp
}
```

#### 6. Заказы (Orders)

**Структура:**
```
{
  id: uuid,
  buyerId: uuid,
  sellerId: uuid,
  productId: uuid (если стандартный товар),
  customOrderId: uuid (если индивидуальный),
  type: enum ["STANDARD", "CUSTOM"],
  status: enum [
    "PENDING_SELLER_RESPONSE",
    "ACCEPTED",
    "DECLINED",
    "IN_PROGRESS",
    "SHIPPED",
    "DELIVERED",
    "COMPLETED",
    "DISPUTED",
    "CANCELLED"
  ],
  price: number,
  currency: string,
  deliveryAddress: object,
  trackingNumber: string (optional),
  estimatedDelivery: date,
  actualDelivery: date,
  payment: object,
  createdAt: timestamp,
  updatedAt: timestamp
}
```

#### 7. Система рейтинга

**После завершения заказа:**
- Обязательная взаимная оценка
- Покупатель оценивает продавца
- Продавец оценивает покупателя
- Критерии оценки:
  - Общая оценка (1-5 звезд)
  - Качество товара/сервиса
  - Своевременность
  - Коммуникация
  - Текстовый отзыв (опционально)
- Блокировка дальнейших действий до оценки

**Расчет рейтинга:**
```
{
  userId: uuid,
  overallRating: number, // средний
  totalReviews: number,
  asSeller: {
    rating: number,
    reviews: number,
    completedOrders: number
  },
  asBuyer: {
    rating: number,
    reviews: number,
    completedOrders: number
  },
  reviews: array[review]
}
```

## Дополнительные рекомендации

### 1. Безопасность
- **Верификация пользователей**: подтверждение телефона, документов
- **Система жалоб и споров**: механизм разрешения конфликтов
- **Модерация**: проверка товаров и пользователей
- **Защита платежей**: эскроу-сервис (деньги удерживаются до получения товара)
- **Шифрование данных**: SSL/TLS, шифрование личных данных

### 2. Платежная система
- Интеграция со Stripe/PayPal
- Поддержка множественных валют
- Эскроу-механизм
- Автоматические выплаты после подтверждения доставки

### 3. Коммуникация
- Встроенный чат между покупателем и продавцом
- Push-уведомления (веб + опционально мобильные)
- Email-уведомления о статусе заказов

### 4. Логистика
- Интеграция с трекинг-системами (отслеживание посылок)
- Калькулятор стоимости доставки
- Шаблоны таможенных деклараций

### 5. Аналитика
- Дашборд для продавцов (статистика продаж)
- Система рекомендаций для покупателей
- A/B тестирование

### 6. Мультиязычность
- i18n поддержка (минимум: EN, RU, испанский, китайский)
- Локализация валют и единиц измерения

### 7. Мобильная версия
- Responsive дизайн
- PWA (Progressive Web App)
- Опционально: нативные приложения в будущем

### 8. Юридические аспекты
- Пользовательское соглашение
- Политика конфиденциальности
- GDPR compliance
- Условия использования
- Страница с FAQ

### 9. Административная панель
- Управление пользователями
- Модерация контента
- Разрешение споров
- Аналитика платформы
- Управление комиссиями

### 10. Система комиссий
- Процент от каждой транзакции
- Различные планы для активных продавцов
- Прозрачность комиссий для пользователей

## Улучшенная функциональность

### Категории товаров
Для лучшей структуризации:
- Электроника
- Одежда и аксессуары
- Косметика и уход
- Продукты питания (специи, деликатесы)
- Книги и медиа
- Товары для дома
- Другое

### Система избранного
- Избранные продавцы
- Избранные товары
- Сохраненные поиски

### Статистика и аналитика
- Популярные направления доставки
- Тренды товаров
- Статистика для продавцов

### Социальные функции
- Возможность подписки на продавцов
- Лента обновлений от избранных продавцов
- Реферальная программа
